CREATE TABLE user_words ();
CREATE TABLE words ();
ALTER TABLE user_words ADD COLUMN word_id SERIAL;
ALTER TABLE user_words ADD COLUMN user_id NUMERIC;
ALTER TABLE words ADD COLUMN id SERIAL;
ALTER TABLE words ADD COLUMN word VARCHAR(32);
ALTER TABLE user_words ALTER COLUMN word_id SET NOT NULL;
ALTER TABLE user_words ALTER COLUMN user_id SET NOT NULL;
ALTER TABLE words ALTER COLUMN id SET NOT NULL;
ALTER TABLE words ALTER COLUMN word SET NOT NULL;
ALTER TABLE words ADD CONSTRAINT word_unique UNIQUE ( word );
ALTER TABLE user_words ADD CONSTRAINT _user_words_word_id_user_id_primary_key PRIMARY KEY ( word_id , user_id );
ALTER TABLE words ADD CONSTRAINT _words_id_primary_key PRIMARY KEY ( id );
ALTER TABLE user_words ADD CONSTRAINT word_id_fk FOREIGN KEY ( word_id ) REFERENCES words ( id ) MATCH SIMPLE ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE user_words ADD CONSTRAINT user_id_fk FOREIGN KEY ( user_id ) REFERENCES users ( user_id ) MATCH SIMPLE ON DELETE CASCADE ON UPDATE CASCADE;